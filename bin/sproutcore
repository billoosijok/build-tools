#!/usr/bin/env node

var util = require('util'),
    path = require('path'),
    args = process.argv,
    curPath = process.cwd(),
    buildtools = require('../index'),
    command = args[2],
    hasREPL = args.indexOf("--repl") > 1,
    hasDebugServer = args.indexOf("--debug-server") > 1,
    runBenchmarks = args.indexOf("--run-benchmarks") > 1,
    runtype,
    app = (command === "build")? args[3]: null;




util.puts("Sproutcore NodeJS BuildTools v0.0.1");
util.puts("");

function startDevServer () {
  buildtools.startDevServer(curPath, { hasREPL: hasREPL, hasDebugServer: hasDebugServer, runBenchmarks: runBenchmarks });
};

switch (command) {
  case "save": buildtools.startSave(curPath); break;
  case "install": buildtools.startInstall(curPath, args.slice(3)); break;
  case "server": startDevServer(); break;
  default: startDevServer();
}

//util.log("args: " + util.inspect(args));
